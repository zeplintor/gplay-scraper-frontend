<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlayStore Analytics Pro - Rapport Premium</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="stylesheet" href="assets/styles/dashboard.css">

</head>
<body>
    <div class="container">
        <header>
            <div class="header-left">
                <span class="header-icon">üíé</span>
                <div class="header-text">
                    <h1 data-i18n="premium.header.title">PlayStore Analytics Pro</h1>
                    <p class="subtitle" data-i18n="premium.header.subtitle">Rapport Premium ultra d√©taill√©</p>
                </div>
            </div>
            <div class="header-right">
                <div class="header-badge" data-i18n="premium.header.badge">Dashboard Premium</div>
                <div class="language-selector">
                    <label for="languageSelect" data-i18n="common.language_label">Langue</label>
                    <select id="languageSelect">
                        <option value="fr" data-i18n="common.languages.fr">Fran√ßais</option>
                        <option value="en" data-i18n="common.languages.en">English</option>
                        <option value="ar" data-i18n="common.languages.ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                        <option value="zh" data-i18n="common.languages.zh">‰∏≠Êñá</option>
                    </select>
                </div>
                <div class="header-meta">
                    <span class="header-meta-label" data-i18n="premium.header.status_label">Statut licence</span>
                    <span id="licenseStatus" class="header-license-placeholder" data-i18n="premium.header.status_placeholder">En attente</span>
                </div>
                <div class="header-links">
                    <a href="index.html" class="link-pill" data-i18n="premium.header.links.home">Accueil</a>
                    <a href="pricing.html" class="link-pill" data-i18n="premium.header.links.pricing">Tarifs</a>
                    <a href="mailto:hello@playstore-analytics.pro" class="link-pill" data-i18n="premium.header.links.support">Support</a>
                </div>
            </div>
        </header>

        <!-- Status Badge: Free vs Premium -->
        <div id="statusBanner" class="status-banner">
            <!-- Will be populated by JavaScript -->
        </div>

        <div class="search-box">
            <div class="search-header">
                <div>
                    <h2 data-i18n="premium.search.title">Recherche d‚Äôapplications</h2>
                    <span data-i18n="premium.search.subtitle">Identifiez les opportunit√©s Play Store en quelques secondes.</span>
                </div>
                <div class="search-actions">
                    <button id="licenseBtn" class="license-btn" data-i18n="premium.actions.license">G√©rer la licence</button>
                    <div class="actions-dropdown">
                        <button id="shareBtn" class="secondary-btn" data-i18n="premium.actions.share">Partager</button>
                        <div class="share-menu" id="shareMenu">
                            <div class="share-menu-item" data-share="email">
                                <span class="icon">‚úâÔ∏è</span>
                                <span class="label" data-i18n="premium.actions.share_email">Envoyer par email</span>
                            </div>
                            <div class="share-menu-item" data-share="clipboard">
                                <span class="icon">üìã</span>
                                <span class="label" data-i18n="premium.actions.share_clipboard">Copier un r√©sum√©</span>
                            </div>
                        </div>
                    </div>
                    <div class="export-container">
                        <button id="exportBtn" class="export-btn" data-i18n="premium.actions.export">Exporter</button>
                        <div id="exportMenu" class="export-menu">
                            <div class="export-menu-item" data-format="pdf">
                                <span class="icon">üìÑ</span>
                                <span class="label">Export PDF</span>
                                <span class="format">PDF</span>
                            </div>
                            <div class="export-menu-item" data-format="json">
                                <span class="icon">üìä</span>
                                <span class="label">Export JSON</span>
                                <span class="format">JSON</span>
                            </div>
                            <div class="export-menu-item" data-format="csv">
                                <span class="icon">üìã</span>
                                <span class="label">Export CSV</span>
                                <span class="format">CSV</span>
                            </div>
                            <div class="export-menu-item" data-format="png">
                                <span class="icon">üñºÔ∏è</span>
                                <span class="label">Export PNG</span>
                                <span class="format">PNG</span>
                            </div>
                            <div class="export-menu-item" data-format="html">
                                <span class="icon">üåê</span>
                                <span class="label">Export HTML</span>
                                <span class="format">HTML</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="input-group">
                <label class="input-label" data-i18n="premium.search.input_name">üîç Rechercher une application par nom</label>
                <div class="input-wrapper">
                    <input type="text" id="appNameSearch" placeholder="Ex: Roblox, Instagram, TikTok..." data-i18n-placeholder="premium.search.input_name_placeholder">
                    <div id="searchSuggestions" class="suggestions-panel"></div>
                </div>
            </div>

            <div class="input-group">
                <label class="input-label" data-i18n="premium.search.input_id">üì± ID de l'application</label>
                <div class="search-container">
                    <input type="text" id="appId" placeholder="Ex: com.roblox.client" value="" data-i18n-placeholder="premium.search.input_id_placeholder">
                    <button id="searchBtn" data-i18n="premium.search.analyze_btn">Analyser</button>
                </div>
            </div>
        </div>

        <div class="card batch-card">
            <div class="batch-header">
                <div>
                    <h2 data-i18n="premium.batch.title">Analyse en s√©rie (CSV)</h2>
                    <p data-i18n-html="premium.batch.subtitle">Importez un fichier contenant une colonne <code>appId</code> pour lancer des analyses successives.</p>
                </div>
                <div class="batch-controls">
                    <label class="upload-label">
                        <input type="file" id="csvInput" accept=".csv">
                        <span data-i18n="premium.batch.import">Importer un CSV</span>
                    </label>
                    <button id="startBatchBtn" class="secondary-btn" disabled data-i18n="premium.batch.start">D√©marrer l'analyse</button>
                </div>
            </div>
            <div id="batchProgress" class="batch-progress"></div>
        </div>

        <div id="loading" class="loading" style="display:none;">
            <div class="spinner"></div>
            <p style="font-size:0.9375rem; font-weight:600; color:#6366f1; margin-top:12px;" data-i18n="premium.loading">Analyse en cours...</p>
        </div>

        <div id="reportContainer"></div>
    </div>

    <!-- Welcome Onboarding Modal -->
    <div id="welcomeModal" class="welcome-modal" style="display: none;">
        <div class="welcome-overlay"></div>
        <div class="welcome-content">
            <button class="welcome-close" id="closeWelcome">√ó</button>
            <div class="welcome-icon">üëã</div>
            <h2 data-i18n="premium.welcome.title">Bienvenue sur PlayStore Analytics Pro !</h2>
            <p class="welcome-subtitle" data-i18n="premium.welcome.subtitle">D√©couvrez la puissance de l'analyse Play Store en quelques clics</p>

            <div class="onboarding-steps">
                <div class="onboarding-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4 data-i18n="premium.welcome.step1_title">Recherchez une application</h4>
                        <p data-i18n="premium.welcome.step1_desc">Tapez le nom d'une app ou essayez avec nos exemples populaires</p>
                    </div>
                </div>
                <div class="onboarding-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4 data-i18n="premium.welcome.step2_title">Analysez les donn√©es</h4>
                        <p data-i18n="premium.welcome.step2_desc">3 analyses gratuites par jour ‚Ä¢ Donn√©es en temps r√©el</p>
                    </div>
                </div>
                <div class="onboarding-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4 data-i18n="premium.welcome.step3_title">Exportez vos rapports</h4>
                        <p data-i18n="premium.welcome.step3_desc">PDF, CSV, JSON ‚Ä¢ Format professionnel pr√™t √† partager</p>
                    </div>
                </div>
            </div>

            <div class="welcome-quickstart">
                <h3 data-i18n="premium.welcome.quickstart_title">üöÄ D√©marrage rapide</h3>
                <div class="quickstart-grid">
                    <button class="quickstart-btn" data-appid="com.roblox.client">
                        <span class="qs-icon">üéÆ</span>
                        <span class="qs-name">Roblox</span>
                    </button>
                    <button class="quickstart-btn" data-appid="com.instagram.android">
                        <span class="qs-icon">üì∏</span>
                        <span class="qs-name">Instagram</span>
                    </button>
                    <button class="quickstart-btn" data-appid="com.zhiliaoapp.musically">
                        <span class="qs-icon">üéµ</span>
                        <span class="qs-name">TikTok</span>
                    </button>
                    <button class="quickstart-btn" data-appid="com.whatsapp">
                        <span class="qs-icon">üí¨</span>
                        <span class="qs-name">WhatsApp</span>
                    </button>
                </div>
            </div>

            <div class="welcome-actions">
                <button class="welcome-btn-primary" id="startExploring" data-i18n="premium.welcome.start">
                    Commencer l'exploration
                </button>
                <button class="welcome-btn-secondary" id="skipWelcome" data-i18n="premium.welcome.skip">
                    Passer l'introduction
                </button>
            </div>

            <p class="welcome-footer" data-i18n="premium.welcome.footer">
                üí° <strong>Astuce :</strong> Vous pouvez analyser gratuitement 3 applications par jour
            </p>
        </div>
    </div>

    <!-- License Management Modal -->
    <div id="licenseModal" class="license-modal" style="display: none;">
        <div class="license-overlay"></div>
        <div class="license-content">
            <button class="license-close" id="closeLicense">√ó</button>

            <!-- Mode: No License -->
            <div id="noLicenseView" class="license-view">
                <div class="license-icon">üîë</div>
                <h2 data-i18n="premium.license.modal_title">Activer votre licence Premium</h2>
                <p class="license-subtitle" data-i18n="premium.license.modal_subtitle">Entrez votre cl√© de licence pour d√©bloquer toutes les fonctionnalit√©s</p>

                <div class="license-input-group">
                    <label for="licenseKeyInput" data-i18n="premium.license.input_label">Cl√© de licence</label>
                    <input
                        type="text"
                        id="licenseKeyInput"
                        class="license-input"
                        placeholder="PSAP-XXXX-XXXX-XXXX-XXXX"
                        maxlength="24"
                        autocomplete="off"
                    >
                    <div id="licenseError" class="license-error" style="display: none;"></div>
                    <div id="licenseSuccess" class="license-success" style="display: none;"></div>
                </div>

                <button id="activateLicenseBtn" class="license-btn-primary" data-i18n="premium.license.activate_btn">
                    Activer la licence
                </button>

                <div class="license-divider">
                    <span>ou</span>
                </div>

                <button class="license-btn-secondary buy-premium-btn" data-plan="premium" data-i18n="premium.license.buy_btn">
                    üí≥ Acheter une licence (9,99‚Ç¨)
                </button>

                <div class="license-help">
                    <p><strong data-i18n="premium.license.test_keys_title">Cl√©s de test disponibles :</strong></p>
                    <div class="test-keys">
                        <code class="test-key" data-key="PSAP-TEST-2025-DEMO-KEY1">PSAP-TEST-2025-DEMO-KEY1</code>
                        <code class="test-key" data-key="PSAP-DEMO-FREE-TRIAL-XYZ">PSAP-DEMO-FREE-TRIAL-XYZ</code>
                    </div>
                    <p class="help-note" data-i18n="premium.license.test_hint">Cliquez sur une cl√© pour la copier</p>
                </div>
            </div>

            <!-- Mode: License Active -->
            <div id="activeLicenseView" class="license-view" style="display: none;">
                <div class="license-icon success">‚úì</div>
                <h2 data-i18n="premium.license.active_title">Licence Premium Active</h2>
                <p class="license-subtitle" data-i18n="premium.license.active_subtitle">Profitez de toutes les fonctionnalit√©s illimit√©es</p>

                <div class="license-info-card">
                    <div class="license-info-row">
                        <span class="info-label" data-i18n="premium.license.info_email">üìß Email</span>
                        <span class="info-value" id="licenseEmail">-</span>
                    </div>
                    <div class="license-info-row">
                        <span class="info-label" data-i18n="premium.license.info_key">üîë Cl√©</span>
                        <span class="info-value" id="licenseKey">-</span>
                    </div>
                    <div class="license-info-row">
                        <span class="info-label" data-i18n="premium.license.info_activated">üìÖ Activ√©e le</span>
                        <span class="info-value" id="licenseDate">-</span>
                    </div>
                    <div class="license-info-row">
                        <span class="info-label" data-i18n="premium.license.info_status">‚è∞ Statut</span>
                        <span class="info-value status-badge" data-i18n="premium.license.status_active">‚úì Active</span>
                    </div>
                </div>

                <div class="license-features">
                    <h3 data-i18n="premium.license.features_title">Fonctionnalit√©s d√©bloqu√©es :</h3>
                    <ul>
                        <li data-i18n="premium.license.feature_unlimited">‚úì Analyses illimit√©es</li>
                        <li data-i18n="premium.license.feature_metrics">‚úì 65+ m√©triques avanc√©es</li>
                        <li data-i18n="premium.license.feature_export">‚úì Export PDF professionnel</li>
                        <li data-i18n="premium.license.feature_batch">‚úì Analyse CSV en batch</li>
                        <li data-i18n="premium.license.feature_support">‚úì Support prioritaire</li>
                    </ul>
                </div>

                <button id="deactivateLicenseBtn" class="license-btn-danger" data-i18n="premium.license.deactivate_btn">
                    D√©sactiver la licence
                </button>
            </div>
        </div>
    </div>

    <!-- Paywall Modal -->
    <div id="paywallModal" class="paywall-modal" style="display: none;">
        <div class="paywall-overlay"></div>
        <div class="paywall-content">
            <button class="paywall-close" id="closePaywall">√ó</button>
            <div class="paywall-icon">üöÄ</div>
            <h2 data-i18n="premium.paywall.title">Limite gratuite atteinte !</h2>
            <p class="paywall-subtitle" data-i18n-html="premium.paywall.subtitle">Vous avez utilis√© vos <strong>3 analyses gratuites</strong> aujourd'hui.</p>

            <div class="paywall-comparison">
                <div class="paywall-col free-col">
                    <div class="paywall-col-header">
                        <h3 data-i18n="premium.paywall.free_title">Gratuit</h3>
                        <div class="paywall-price" data-i18n="premium.paywall.free_price">0‚Ç¨</div>
                    </div>
                    <ul class="paywall-features">
                        <li class="limited" data-i18n="premium.paywall.free_features.0">3 analyses par jour</li>
                        <li class="limited" data-i18n="premium.paywall.free_features.1">Donn√©es de base uniquement</li>
                        <li class="limited" data-i18n="premium.paywall.free_features.2">Export avec watermark</li>
                        <li class="limited" data-i18n="premium.paywall.free_features.3">Sections premium flout√©es</li>
                    </ul>
                </div>

                <div class="paywall-col premium-col">
                    <div class="paywall-badge" data-i18n="premium.paywall.premium_badge">RECOMMAND√â</div>
                    <div class="paywall-col-header">
                        <h3 data-i18n="premium.paywall.premium_title">Premium</h3>
                        <div class="paywall-price" data-i18n="premium.paywall.premium_price">9,99‚Ç¨</div>
                    </div>
                    <ul class="paywall-features">
                        <li class="included" data-i18n="premium.paywall.premium_features.0">‚úì Analyses illimit√©es</li>
                        <li class="included" data-i18n="premium.paywall.premium_features.1">‚úì 65+ m√©triques compl√®tes</li>
                        <li class="included" data-i18n="premium.paywall.premium_features.2">‚úì Export PDF professionnel</li>
                        <li class="included" data-i18n="premium.paywall.premium_features.3">‚úì Analyse CSV en batch</li>
                        <li class="included" data-i18n="premium.paywall.premium_features.4">‚úì Toutes sections d√©bloqu√©es</li>
                        <li class="included" data-i18n="premium.paywall.premium_features.5">‚úì Support prioritaire</li>
                    </ul>
                </div>
            </div>

            <div class="paywall-actions">
                <button class="paywall-btn-primary buy-premium-btn" data-plan="premium" data-i18n="premium.paywall.primary_cta">
                    üíé D√©bloquer Premium - 9,99‚Ç¨
                </button>
                <button class="paywall-btn-secondary" id="paywallWaitTomorrow" data-i18n="premium.paywall.secondary_cta">
                    Revenir demain (3 nouvelles analyses)
                </button>
            </div>

            <p class="paywall-footer" data-i18n="premium.paywall.footer">üí≥ Paiement s√©curis√© ‚Ä¢ Acc√®s instantan√© ‚Ä¢ Garantie 30 jours</p>
        </div>
    </div>

<script src="assets/lang/i18n.js"></script>
<script src="assets/scripts/stripe-checkout.js"></script>
<script src="assets/scripts/dashboard.js"></script>
</body>
</html>
