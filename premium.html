<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlayStore Analytics Pro - Rapport Premium</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="stylesheet" href="assets/styles/dashboard.css">

</head>
<body>
    <div class="container">
        <header>
            <div class="header-left">
                <span class="header-icon">üíé</span>
                <div class="header-text">
                    <h1>PlayStore Analytics Pro</h1>
                    <p class="subtitle">Rapport Premium ultra d√©taill√©</p>
                </div>
            </div>
            <div class="header-right">
                <div class="header-badge">Dashboard Premium</div>
                <div class="header-meta">
                    <span class="header-meta-label">Statut licence</span>
                    <span id="licenseStatus" class="header-license-placeholder">En attente</span>
                </div>
                <div class="header-links">
                    <a href="index.html" class="link-pill">Accueil</a>
                    <a href="pricing.html" class="link-pill">Tarifs</a>
                    <a href="mailto:hello@playstore-analytics.pro" class="link-pill">Support</a>
                </div>
            </div>
        </header>

        <!-- Status Badge: Free vs Premium -->
        <div id="statusBanner" class="status-banner">
            <!-- Will be populated by JavaScript -->
        </div>

        <div class="search-box">
            <div class="search-header">
                <div>
                    <h2>Recherche d‚Äôapplications</h2>
                    <span>Identifiez les opportunit√©s Play Store en quelques secondes.</span>
                </div>
                <div class="search-actions">
                    <button id="licenseBtn" class="license-btn">G√©rer la licence</button>
                    <div class="actions-dropdown">
                        <button id="shareBtn" class="secondary-btn">Partager</button>
                        <div class="share-menu" id="shareMenu">
                            <div class="share-menu-item" data-share="email">
                                <span class="icon">‚úâÔ∏è</span>
                                <span class="label">Envoyer par email</span>
                            </div>
                            <div class="share-menu-item" data-share="clipboard">
                                <span class="icon">üìã</span>
                                <span class="label">Copier un r√©sum√©</span>
                            </div>
                        </div>
                    </div>
                    <div class="export-container">
                        <button id="exportBtn" class="export-btn">Exporter</button>
                        <div id="exportMenu" class="export-menu">
                            <div class="export-menu-item" data-format="pdf">
                                <span class="icon">üìÑ</span>
                                <span class="label">Export PDF</span>
                                <span class="format">PDF</span>
                            </div>
                            <div class="export-menu-item" data-format="json">
                                <span class="icon">üìä</span>
                                <span class="label">Export JSON</span>
                                <span class="format">JSON</span>
                            </div>
                            <div class="export-menu-item" data-format="csv">
                                <span class="icon">üìã</span>
                                <span class="label">Export CSV</span>
                                <span class="format">CSV</span>
                            </div>
                            <div class="export-menu-item" data-format="png">
                                <span class="icon">üñºÔ∏è</span>
                                <span class="label">Export PNG</span>
                                <span class="format">PNG</span>
                            </div>
                            <div class="export-menu-item" data-format="html">
                                <span class="icon">üåê</span>
                                <span class="label">Export HTML</span>
                                <span class="format">HTML</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="input-group">
                <label class="input-label">üîç Rechercher une application par nom</label>
                <div class="input-wrapper">
                    <input type="text" id="appNameSearch" placeholder="Ex: Roblox, Instagram, TikTok...">
                    <div id="searchSuggestions" class="suggestions-panel"></div>
                </div>
            </div>

            <div class="input-group">
                <label class="input-label">üì± ID de l'application</label>
                <div class="search-container">
                    <input type="text" id="appId" placeholder="Ex: com.roblox.client" value="">
                    <button id="searchBtn">Analyser</button>
                </div>
            </div>
        </div>

        <div class="card batch-card">
            <div class="batch-header">
                <div>
                    <h2>Analyse en s√©rie (CSV)</h2>
                    <p>Importez un fichier contenant une colonne <code>appId</code> pour lancer des analyses successives.</p>
                </div>
                <div class="batch-controls">
                    <label class="upload-label">
                        <input type="file" id="csvInput" accept=".csv">
                        <span>Importer un CSV</span>
                    </label>
                    <button id="startBatchBtn" class="secondary-btn" disabled>D√©marrer l'analyse</button>
                </div>
            </div>
            <div id="batchProgress" class="batch-progress"></div>
        </div>

        <div id="loading" class="loading" style="display:none;">
            <div class="spinner"></div>
            <p style="font-size:0.9375rem; font-weight:600; color:#6366f1; margin-top:12px;">Analyse en cours...</p>
        </div>

        <div id="reportContainer"></div>
    </div>

    <!-- Welcome Onboarding Modal -->
    <div id="welcomeModal" class="welcome-modal" style="display: none;">
        <div class="welcome-overlay"></div>
        <div class="welcome-content">
            <button class="welcome-close" id="closeWelcome">√ó</button>
            <div class="welcome-icon">üëã</div>
            <h2>Bienvenue sur PlayStore Analytics Pro !</h2>
            <p class="welcome-subtitle">D√©couvrez la puissance de l'analyse Play Store en quelques clics</p>

            <div class="onboarding-steps">
                <div class="onboarding-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>Recherchez une application</h4>
                        <p>Tapez le nom d'une app ou essayez avec nos exemples populaires</p>
                    </div>
                </div>
                <div class="onboarding-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>Analysez les donn√©es</h4>
                        <p>3 analyses gratuites par jour ‚Ä¢ Donn√©es en temps r√©el</p>
                    </div>
                </div>
                <div class="onboarding-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>Exportez vos rapports</h4>
                        <p>PDF, CSV, JSON ‚Ä¢ Format professionnel pr√™t √† partager</p>
                    </div>
                </div>
            </div>

            <div class="welcome-quickstart">
                <h3>üöÄ D√©marrage rapide</h3>
                <div class="quickstart-grid">
                    <button class="quickstart-btn" data-appid="com.roblox.client">
                        <span class="qs-icon">üéÆ</span>
                        <span class="qs-name">Roblox</span>
                    </button>
                    <button class="quickstart-btn" data-appid="com.instagram.android">
                        <span class="qs-icon">üì∏</span>
                        <span class="qs-name">Instagram</span>
                    </button>
                    <button class="quickstart-btn" data-appid="com.zhiliaoapp.musically">
                        <span class="qs-icon">üéµ</span>
                        <span class="qs-name">TikTok</span>
                    </button>
                    <button class="quickstart-btn" data-appid="com.whatsapp">
                        <span class="qs-icon">üí¨</span>
                        <span class="qs-name">WhatsApp</span>
                    </button>
                </div>
            </div>

            <div class="welcome-actions">
                <button class="welcome-btn-primary" id="startExploring">
                    Commencer l'exploration
                </button>
                <button class="welcome-btn-secondary" id="skipWelcome">
                    Passer l'introduction
                </button>
            </div>

            <p class="welcome-footer">
                üí° <strong>Astuce :</strong> Vous pouvez analyser gratuitement 3 applications par jour
            </p>
        </div>
    </div>

    <!-- License Management Modal -->
    <div id="licenseModal" class="license-modal" style="display: none;">
        <div class="license-overlay"></div>
        <div class="license-content">
            <button class="license-close" id="closeLicense">√ó</button>

            <!-- Mode: No License -->
            <div id="noLicenseView" class="license-view">
                <div class="license-icon">üîë</div>
                <h2>Activer votre licence Premium</h2>
                <p class="license-subtitle">Entrez votre cl√© de licence pour d√©bloquer toutes les fonctionnalit√©s</p>

                <div class="license-input-group">
                    <label for="licenseKeyInput">Cl√© de licence</label>
                    <input
                        type="text"
                        id="licenseKeyInput"
                        class="license-input"
                        placeholder="PSAP-XXXX-XXXX-XXXX-XXXX"
                        maxlength="24"
                        autocomplete="off"
                    >
                    <div id="licenseError" class="license-error" style="display: none;"></div>
                    <div id="licenseSuccess" class="license-success" style="display: none;"></div>
                </div>

                <button id="activateLicenseBtn" class="license-btn-primary">
                    Activer la licence
                </button>

                <div class="license-divider">
                    <span>ou</span>
                </div>

                <a href="https://votresite.gumroad.com/l/playstore-pro" target="_blank" class="license-btn-secondary">
                    üí≥ Acheter une licence (9,99‚Ç¨)
                </a>

                <div class="license-help">
                    <p><strong>Cl√©s de test disponibles :</strong></p>
                    <div class="test-keys">
                        <code class="test-key" data-key="PSAP-TEST-2025-DEMO-KEY1">PSAP-TEST-2025-DEMO-KEY1</code>
                        <code class="test-key" data-key="PSAP-DEMO-FREE-TRIAL-XYZ">PSAP-DEMO-FREE-TRIAL-XYZ</code>
                    </div>
                    <p class="help-note">Cliquez sur une cl√© pour la copier</p>
                </div>
            </div>

            <!-- Mode: License Active -->
            <div id="activeLicenseView" class="license-view" style="display: none;">
                <div class="license-icon success">‚úì</div>
                <h2>Licence Premium Active</h2>
                <p class="license-subtitle">Profitez de toutes les fonctionnalit√©s illimit√©es</p>

                <div class="license-info-card">
                    <div class="license-info-row">
                        <span class="info-label">üìß Email</span>
                        <span class="info-value" id="licenseEmail">-</span>
                    </div>
                    <div class="license-info-row">
                        <span class="info-label">üîë Cl√©</span>
                        <span class="info-value" id="licenseKey">-</span>
                    </div>
                    <div class="license-info-row">
                        <span class="info-label">üìÖ Activ√©e le</span>
                        <span class="info-value" id="licenseDate">-</span>
                    </div>
                    <div class="license-info-row">
                        <span class="info-label">‚è∞ Statut</span>
                        <span class="info-value status-badge">‚úì Active</span>
                    </div>
                </div>

                <div class="license-features">
                    <h3>Fonctionnalit√©s d√©bloqu√©es :</h3>
                    <ul>
                        <li>‚úì Analyses illimit√©es</li>
                        <li>‚úì 65+ m√©triques avanc√©es</li>
                        <li>‚úì Export PDF professionnel</li>
                        <li>‚úì Analyse CSV en batch</li>
                        <li>‚úì Support prioritaire</li>
                    </ul>
                </div>

                <button id="deactivateLicenseBtn" class="license-btn-danger">
                    D√©sactiver la licence
                </button>
            </div>
        </div>
    </div>

    <!-- Paywall Modal -->
    <div id="paywallModal" class="paywall-modal" style="display: none;">
        <div class="paywall-overlay"></div>
        <div class="paywall-content">
            <button class="paywall-close" id="closePaywall">√ó</button>
            <div class="paywall-icon">üöÄ</div>
            <h2>Limite gratuite atteinte !</h2>
            <p class="paywall-subtitle">Vous avez utilis√© vos <strong>3 analyses gratuites</strong> aujourd'hui.</p>

            <div class="paywall-comparison">
                <div class="paywall-col free-col">
                    <div class="paywall-col-header">
                        <h3>Gratuit</h3>
                        <div class="paywall-price">0‚Ç¨</div>
                    </div>
                    <ul class="paywall-features">
                        <li class="limited">3 analyses par jour</li>
                        <li class="limited">Donn√©es de base uniquement</li>
                        <li class="limited">Export avec watermark</li>
                        <li class="limited">Sections premium flout√©es</li>
                    </ul>
                </div>

                <div class="paywall-col premium-col">
                    <div class="paywall-badge">RECOMMAND√â</div>
                    <div class="paywall-col-header">
                        <h3>Premium</h3>
                        <div class="paywall-price">9,99‚Ç¨</div>
                    </div>
                    <ul class="paywall-features">
                        <li class="included">‚úì Analyses illimit√©es</li>
                        <li class="included">‚úì 65+ m√©triques compl√®tes</li>
                        <li class="included">‚úì Export PDF professionnel</li>
                        <li class="included">‚úì Analyse CSV en batch</li>
                        <li class="included">‚úì Toutes sections d√©bloqu√©es</li>
                        <li class="included">‚úì Support prioritaire</li>
                    </ul>
                </div>
            </div>

            <div class="paywall-actions">
                <a href="https://votresite.gumroad.com/l/playstore-pro" class="paywall-btn-primary" target="_blank">
                    üíé D√©bloquer Premium - 9,99‚Ç¨
                </a>
                <button class="paywall-btn-secondary" id="paywallWaitTomorrow">
                    Revenir demain (3 nouvelles analyses)
                </button>
            </div>

            <p class="paywall-footer">üí≥ Paiement s√©curis√© ‚Ä¢ Acc√®s instantan√© ‚Ä¢ Garantie 30 jours</p>
        </div>
    </div>

<script src="assets/scripts/dashboard.js"></script>
</body>
</html>
